

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Installation &mdash; Exakat 1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Upgrading" href="Upgrading.html" />
    <link rel="prev" title="2. Exakat features" href="Features.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Exakat
          

          
          </a>

          
            
            
              <div class="version">
                2.1.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Features.html">2. Exakat features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#summary">3.1. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requirements">3.2. Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#download-exakat">3.3. Download Exakat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quick-installation-with-exakat-phar">3.4. Quick installation with exakat.phar</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#osx-installation-with-tinkergraph-3-4-8">3.4.1. OSX installation with tinkergraph 3.4.8</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quick-installation-with-osx">3.5. Quick installation with OSX</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">3.5.1. OSX installation with tinkergraph 3.4.8</a></li>
<li class="toctree-l3"><a class="reference internal" href="#osx-installation-troubleshooting">3.5.2. OSX installation troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#full-installation-with-debian-ubuntu">3.6. Full installation with Debian/Ubuntu</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quick-installation-with-debian-ubuntu">3.7. Quick installation with Debian/Ubuntu</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#debian-ubuntu-installation-with-tinkergraph-3-4-8">3.7.1. Debian/Ubuntu installation with Tinkergraph 3.4.8</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation-guide-with-composer">3.8. Installation guide with Composer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#composer-installation-first-run">3.8.1. Composer installation first run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-multiple-php-versions">3.9. Using multiple PHP versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-guide-with-docker">3.10. Installation guide with Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#docker-image-for-exakat-with-projects-folder">3.10.1. Docker image for Exakat with projects folder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">3.10.2. Docker image for Exakat with projects folder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#docker-php-image-with-exakat">3.10.3. Docker PHP image with Exakat</a></li>
<li class="toctree-l3"><a class="reference internal" href="#docker-gremlin-image-with-exakat">3.10.4. Docker Gremlin image with Exakat</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation-guide-as-github-action">3.11. Installation guide as Github Action</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#github-action">3.11.1. Github Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="#github-action-for-exakat">3.11.2. Github Action for Exakat</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exakat-docker-image-for-github-action">3.11.3. Exakat Docker image for Github Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation-guide-for-optional-tools">3.11.4. Installation guide for optional tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Upgrading.html">4. Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial.html">5. Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">6. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">7. Exakat commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Rulesets.html">8. Rulesets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Rules.html">9. Rules list</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cases.html">10. Real Code Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="Reports.html">11. Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">12. Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Development.html">13. Custom analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">14. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="Definitions.html">15. Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contribute.html">16. Ideas</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contributors.html">17. List of contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Annex.html">18. Annex</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Exakat</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>3. Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<span id="id1"></span><h1>3. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>3.1. Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#quick-installation-with-exakat-phar">Quick installation with exakat.phar</a></li>
<li><a class="reference internal" href="#quick-installation-with-osx">Quick installation with OSX</a></li>
<li><a class="reference internal" href="#full-installation-with-debian-ubuntu">Full installation with Debian/Ubuntu</a></li>
<li><a class="reference internal" href="#quick-installation-with-debian-ubuntu">Quick installation with Debian/Ubuntu</a></li>
<li><a class="reference internal" href="#installation-guide-with-composer">Installation guide with Composer</a></li>
<li><a class="reference internal" href="#installation-guide-with-docker">Installation guide with Docker</a></li>
<li><a class="reference internal" href="#installation-guide-as-github-action">Installation guide as Github Action</a></li>
<li><a class="reference internal" href="#installation-guide-for-optional-tools">Installation guide for optional tools</a></li>
</ul>
</div>
<div class="section" id="requirements">
<h2>3.2. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>Exakat relies on several parts. Some are necessary and some are optional.</p>
<p>Basic requirements :</p>
<ul class="simple">
<li>exakat.phar, the main code.</li>
<li><a class="reference external" href="http://tinkerpop.apache.org/">Gremlin server</a> : exakat uses this graph database and the Gremlin 3 traversal language. Currently, only Gremlin Server is supported, with the tinkergraph and neo4j storage engine. Version 3.4.x is the recommended version, while version 3.3.x are still supported. Gremlin version 3.2.* are unsupported.</li>
<li>Java 8.x. Java 9.x/10.x will be supported later. Java 7.x was used, but is not actively supported.</li>
<li><a class="reference external" href="https://www.php.net/">PHP</a> 7.4 to run. PHP 7.4 is recommended, PHP 7.2 or later are possible. This version requires the PHP extensions curl, hash, phar, sqlite3, tokenizer, mbstring and json.</li>
</ul>
<p>Optional requirements :</p>
<ul class="simple">
<li>PHP 5.2 to 8.0-dev for analysis purposes. Those versions only require the ext/tokenizer extension.</li>
<li>VCS (Version Control Software), such as Git, SVN, bazaar, Mercurial. They all are optional, though git is recommended.</li>
<li>Archives, such as zip, tgz, tbz2 may also be opened with optional helpers (See <a class="reference internal" href="#installation-guide-for-optional-tools">Installation guide for optional tools</a>).</li>
</ul>
<p>OS requirements :
Exakat has beed tested on OSX, Debian and Ubuntu (up to 20.04). Exakat should work on Linux distributions, may be with little work. Exakat hasn’t been tested on Windows at all.</p>
<p>For installation, curl or wget, and zip are needed.</p>
</div>
<div class="section" id="download-exakat">
<h2>3.3. Download Exakat<a class="headerlink" href="#download-exakat" title="Permalink to this headline">¶</a></h2>
<p>You can download exakat directly from <a class="reference external" href="https://www.exakat.io/">https://www.exakat.io/</a>.</p>
<p>This server also provides older versions of Exakat. It is recommended to always download the last version, which is available with <a class="reference external" href="https://www.exakat.io/versions/index.php?file=latest">https://www.exakat.io/versionss/index.php?file=latest</a>.</p>
<p>For each version, MD5 and SHA256 signatures are available. The downloaded MD5 must match the one in the related .md5 file. The .md5 also has the version number, for extra check.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span> <span class="s1">&#39;https://www.exakat.io/versions/index.php?file=latest&#39;</span>

<span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span><span class="o">.</span><span class="n">md5</span> <span class="s1">&#39;https://www.exakat.io/versions/index.php?file=latest.md5&#39;</span>
<span class="o">//</span><span class="mi">19485</span><span class="n">adb7d43b43f7c01b7153ae82881</span>  <span class="n">exakat</span><span class="o">-</span><span class="mf">2.0</span><span class="o">.</span><span class="mf">0.</span><span class="n">phar</span>
<span class="n">md5sum</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span><span class="o">.</span><span class="n">md5</span>
<span class="o">//</span> <span class="n">Example</span> <span class="p">:</span>
<span class="o">//</span><span class="mi">19485</span><span class="n">adb7d43b43f7c01b7153ae82881</span>  <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span>

<span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span><span class="o">.</span><span class="n">sha256</span> <span class="s1">&#39;https://www.exakat.io/versions/index.php?file=latest.sha256&#39;</span>
<span class="o">//</span><span class="n">d838c9ec9291e15873137693da2a0038a67c2f15c2282b89f09f27f23d24d27f</span>  <span class="n">exakat</span><span class="o">-</span><span class="mf">2.0</span><span class="o">.</span><span class="mf">0.</span><span class="n">phar</span>
<span class="n">sha256sum</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span><span class="o">.</span><span class="n">md5</span>
<span class="o">//</span> <span class="n">Example</span> <span class="p">:</span>
<span class="o">//</span><span class="n">d838c9ec9291e15873137693da2a0038a67c2f15c2282b89f09f27f23d24d27f</span>  <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span>

<span class="o">//</span> <span class="n">Check</span> <span class="k">with</span> <span class="n">GPG</span> <span class="n">signature</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="n">exakat</span><span class="o">.</span><span class="n">sig</span> <span class="s1">&#39;https://www.exakat.io/versions/index.php?file=latest.sig&#39;</span>
<span class="o">//</span> <span class="n">Optional</span> <span class="n">step</span> <span class="p">:</span> <span class="n">Download</span> <span class="n">the</span> <span class="n">Key</span>
<span class="n">gpg</span> <span class="o">--</span><span class="n">recv</span><span class="o">-</span><span class="n">keys</span> <span class="mi">5</span><span class="n">EDF7EA4</span>
<span class="o">//</span> <span class="n">Check</span> <span class="k">with</span> <span class="n">GPG</span> <span class="n">signature</span>
<span class="n">gpg</span> <span class="o">--</span><span class="n">verify</span> <span class="n">exakat</span><span class="o">.</span><span class="n">sig</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span>
<span class="o">//</span> <span class="n">Good</span> <span class="n">result</span> <span class="p">:</span>
<span class="o">//</span><span class="n">gpg</span><span class="p">:</span> <span class="n">Signature</span> <span class="n">made</span> <span class="n">Tue</span> <span class="n">Nov</span>  <span class="mi">5</span> <span class="mi">07</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">34</span> <span class="mi">2019</span> <span class="n">CET</span> <span class="n">using</span> <span class="n">RSA</span> <span class="n">key</span> <span class="n">ID</span> <span class="mi">5</span><span class="n">EDF7EA4</span>
<span class="o">//</span><span class="n">gpg</span><span class="p">:</span> <span class="n">Good</span> <span class="n">signature</span> <span class="kn">from</span> <span class="s2">&quot;Seguy Damien &lt;damien.seguy@gmail.com&gt;&quot;</span> <span class="p">[</span><span class="n">ultimate</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="quick-installation-with-exakat-phar">
<h2>3.4. Quick installation with exakat.phar<a class="headerlink" href="#quick-installation-with-exakat-phar" title="Permalink to this headline">¶</a></h2>
<div class="section" id="osx-installation-with-tinkergraph-3-4-8">
<h3>3.4.1. OSX installation with tinkergraph 3.4.8<a class="headerlink" href="#osx-installation-with-tinkergraph-3-4-8" title="Permalink to this headline">¶</a></h3>
<p>Exakat.phar includes its own installation script, as long as PHP is available. Exakat will then check different pre-requisites, and proceed to install some of the last elements.</p>
<p>Exakat checks for Java and Zip installations. Then, it downloads tinkergraph and the Neo4j plugin from exakat.io and runs the <cite>doctor</cite> command.</p>
<p>The script is based on the one displayed on the next section.</p>
<p>You can use the <cite>install</cite> command this way :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">exakat</span>
<span class="n">cd</span> <span class="n">exakat</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span> <span class="s1">&#39;https://www.exakat.io/versions/index.php?file=latest&#39;</span>
<span class="n">php</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span> <span class="n">install</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="quick-installation-with-osx">
<h2>3.5. Quick installation with OSX<a class="headerlink" href="#quick-installation-with-osx" title="Permalink to this headline">¶</a></h2>
<p>Paste the following commands in a terminal prompt. It downloads Exakat, and installs tinkerpop version 3.4.8.
PHP 7.0 or more recent, curl, homebrew are required.</p>
<div class="section" id="id2">
<h3>3.5.1. OSX installation with tinkergraph 3.4.8<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>This is the installation script for Exakat and tinkergraph 3.4.8.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">exakat</span>
<span class="n">cd</span> <span class="n">exakat</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span> <span class="s1">&#39;https://www.exakat.io/versions/index.php?file=latest&#39;</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="n">apache</span><span class="o">-</span><span class="n">tinkerpop</span><span class="o">-</span><span class="n">gremlin</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">3.4</span><span class="o">.</span><span class="mi">8</span><span class="o">-</span><span class="nb">bin</span><span class="o">.</span><span class="n">zip</span> <span class="s1">&#39;https://www.exakat.io/versions/apache-tinkerpop-gremlin-server-3.4.8-bin.zip&#39;</span>
<span class="n">unzip</span> <span class="n">apache</span><span class="o">-</span><span class="n">tinkerpop</span><span class="o">-</span><span class="n">gremlin</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">3.4</span><span class="o">.</span><span class="mi">8</span><span class="o">-</span><span class="nb">bin</span><span class="o">.</span><span class="n">zip</span>
<span class="n">mv</span> <span class="n">apache</span><span class="o">-</span><span class="n">tinkerpop</span><span class="o">-</span><span class="n">gremlin</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">3.4</span><span class="o">.</span><span class="mi">8</span> <span class="n">tinkergraph</span>
<span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">apache</span><span class="o">-</span><span class="n">tinkerpop</span><span class="o">-</span><span class="n">gremlin</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">3.4</span><span class="o">.</span><span class="mi">8</span><span class="o">-</span><span class="nb">bin</span><span class="o">.</span><span class="n">zip</span>

<span class="c1"># Optional : install neo4j engine.</span>
<span class="n">cd</span> <span class="n">tinkergraph</span>
<span class="o">./</span><span class="nb">bin</span><span class="o">/</span><span class="n">gremlin</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">sh</span> <span class="n">install</span> <span class="n">org</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">tinkerpop</span> <span class="n">neo4j</span><span class="o">-</span><span class="n">gremlin</span> <span class="mf">3.4</span><span class="o">.</span><span class="mi">8</span>
<span class="n">cd</span> <span class="o">..</span>

<span class="n">php</span> <span class="n">exakat</span><span class="o">.</span><span class="n">phar</span> <span class="n">doctor</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-installation-troubleshooting">
<h3>3.5.2. OSX installation troubleshooting<a class="headerlink" href="#osx-installation-troubleshooting" title="Permalink to this headline">¶</a></h3>
<p>It has be reported that installation fails on OSX 10.11 and 10.12, with error similar to ‘Error grabbing Grapes’. To fix this, use the following in command line :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="o">-</span><span class="n">r</span> <span class="o">~/.</span><span class="n">groovy</span><span class="o">/</span><span class="n">grapes</span><span class="o">/</span>
<span class="n">rm</span> <span class="o">-</span><span class="n">r</span> <span class="o">~/.</span><span class="n">m2</span><span class="o">/</span>
</pre></div>
</div>
<p>They remove some files for grapes, that it will rebuild later. Then, try again the optional install instructions.</p>
</div>
</div>
<div class="section" id="full-installation-with-debian-ubuntu">
<h2>3.6. Full installation with Debian/Ubuntu<a class="headerlink" href="#full-installation-with-debian-ubuntu" title="Permalink to this headline">¶</a></h2>
<p>The following commands are an optional pre-requisite to the Quick installation guide, that just follows. If something is missing in the next section, check with this section that all has beed installed correctly.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">////</span> <span class="n">Installing</span> <span class="n">PHP</span> <span class="kn">from</span> <span class="nn">sury.org</span>
<span class="n">apt</span> <span class="n">update</span>
<span class="n">apt</span> <span class="n">install</span> <span class="n">apt</span><span class="o">-</span><span class="n">transport</span><span class="o">-</span><span class="n">https</span> <span class="n">lsb</span><span class="o">-</span><span class="n">release</span> <span class="n">ca</span><span class="o">-</span><span class="n">certificates</span>

<span class="n">wget</span> <span class="o">-</span><span class="n">O</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">trusted</span><span class="o">.</span><span class="n">gpg</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">php</span><span class="o">.</span><span class="n">gpg</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">packages</span><span class="o">.</span><span class="n">sury</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">php</span><span class="o">/</span><span class="n">apt</span><span class="o">.</span><span class="n">gpg</span>
<span class="n">sh</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;echo &quot;deb https://packages.sury.org/php/ $(lsb_release -sc) main&quot; &gt; /etc/apt/sources.list.d/php.list&#39;</span>
<span class="n">apt</span> <span class="n">update</span>

<span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">php7</span><span class="o">.</span><span class="mi">2</span> <span class="n">php7</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">common</span> <span class="n">php7</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">cli</span> <span class="n">php7</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">curl</span> <span class="n">php7</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">json</span> <span class="n">php7</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">mbstring</span> <span class="n">php7</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">sqlite3</span>

<span class="o">////</span> <span class="n">Installing</span> <span class="n">Java</span> <span class="n">JDK</span>
<span class="n">echo</span> <span class="s2">&quot;deb http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main&quot;</span> <span class="o">|</span> <span class="n">tee</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">webupd8team</span><span class="o">-</span><span class="n">java</span><span class="o">.</span><span class="n">list</span>
<span class="n">echo</span> <span class="s2">&quot;deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main&quot;</span> <span class="o">|</span> <span class="n">tee</span> <span class="o">-</span><span class="n">a</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">webupd8team</span><span class="o">-</span><span class="n">java</span><span class="o">.</span><span class="n">list</span>
<span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>

<span class="n">echo</span> <span class="n">debconf</span> <span class="n">shared</span><span class="o">/</span><span class="n">accepted</span><span class="o">-</span><span class="n">oracle</span><span class="o">-</span><span class="n">license</span><span class="o">-</span><span class="n">v1</span><span class="o">-</span><span class="mi">1</span> <span class="n">select</span> <span class="n">true</span> <span class="o">|</span> <span class="n">debconf</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">selections</span>
<span class="n">echo</span> <span class="n">debconf</span> <span class="n">shared</span><span class="o">/</span><span class="n">accepted</span><span class="o">-</span><span class="n">oracle</span><span class="o">-</span><span class="n">license</span><span class="o">-</span><span class="n">v1</span><span class="o">-</span><span class="mi">1</span> <span class="n">seen</span> <span class="n">true</span> <span class="o">|</span> <span class="n">debconf</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">selections</span>
<span class="n">DEBIAN_FRONTEND</span><span class="o">=</span><span class="n">noninteractive</span>  <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="o">--</span><span class="n">force</span><span class="o">-</span><span class="n">yes</span> <span class="n">oracle</span><span class="o">-</span><span class="n">java8</span><span class="o">-</span><span class="n">installer</span> <span class="n">oracle</span><span class="o">-</span><span class="n">java8</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">default</span>

<span class="o">////</span> <span class="n">Installing</span> <span class="n">other</span> <span class="n">tools</span>
<span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">install</span><span class="o">-</span><span class="n">recommends</span> <span class="n">git</span> <span class="n">subversion</span> <span class="n">mercurial</span> <span class="n">lsof</span> <span class="n">unzip</span>
</pre></div>
</div>
</div>
<div class="section" id="quick-installation-with-debian-ubuntu">
<h2>3.7. Quick installation with Debian/Ubuntu<a class="headerlink" href="#quick-installation-with-debian-ubuntu" title="Permalink to this headline">¶</a></h2>
<div class="section" id="debian-ubuntu-installation-with-tinkergraph-3-4-8">
<h3>3.7.1. Debian/Ubuntu installation with Tinkergraph 3.4.8<a class="headerlink" href="#debian-ubuntu-installation-with-tinkergraph-3-4-8" title="Permalink to this headline">¶</a></h3>
<p>Paste the following commands in a terminal prompt. It installs Exakat most recent version with Tinkergraph 3.4.8.
PHP 7.3 (7.0 or more recent), wget and unzip are expected.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir exakat
cd exakat
wget -O exakat.phar https://www.exakat.io/versions/index.php?file=latest
wget -O apache-tinkerpop-gremlin-server-3.4.8-bin.zip &#39;https://www.exakat.io/versions/apache-tinkerpop-gremlin-server-3.4.8-bin.zip&#39;
unzip apache-tinkerpop-gremlin-server-3.4.8-bin.zip
mv apache-tinkerpop-gremlin-server-3.4.8 tinkergraph
rm -rf apache-tinkerpop-gremlin-server-3.4.8-bin.zip

# Optional : install neo4j engine.
cd tinkergraph
./bin/gremlin-server.sh install org.apache.tinkerpop neo4j-gremlin 3.4.8
cd ..

php exakat.phar doctor
</pre></div>
</div>
</div>
</div>
<div class="section" id="installation-guide-with-composer">
<h2>3.8. Installation guide with Composer<a class="headerlink" href="#installation-guide-with-composer" title="Permalink to this headline">¶</a></h2>
<div class="section" id="composer-installation-first-run">
<h3>3.8.1. Composer installation first run<a class="headerlink" href="#composer-installation-first-run" title="Permalink to this headline">¶</a></h3>
<p>To install Exakat with composer, you can use the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">exakat</span>
<span class="n">cd</span> <span class="n">exakat</span>
<span class="n">composer</span> <span class="n">require</span> <span class="n">exakat</span><span class="o">/</span><span class="n">exakat</span>
<span class="n">php</span> <span class="n">vendor</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">exakat</span> <span class="n">install</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
<p>The final command checks for the presence of Java and unZip utility. Then, it installs a local copy of a <a class="reference external" href="http://tinkerpop.apache.org/">Gremlin server</a>. This is needed to run Exakat.</p>
<p>To run your first audit, use the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">php</span> <span class="n">vendor</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">exakat</span> <span class="n">init</span> <span class="o">-</span><span class="n">p</span> <span class="n">sculpin</span> <span class="o">-</span><span class="n">R</span> <span class="s1">&#39;https://github.com/sculpin/sculpin.git&#39;</span>
<span class="n">php</span> <span class="n">vendor</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">exakat</span> <span class="n">project</span> <span class="o">-</span><span class="n">p</span> <span class="n">sculpin</span>
</pre></div>
</div>
<p>The final audit is now in the <cite>projects/sculpin/report</cite> directory.</p>
</div>
</div>
<div class="section" id="using-multiple-php-versions">
<h2>3.9. Using multiple PHP versions<a class="headerlink" href="#using-multiple-php-versions" title="Permalink to this headline">¶</a></h2>
<p>You need at least one version of PHP to run exakat. This version needs the <a class="reference external" href="http://www.php.net/curl">curl</a>, <a class="reference external" href="http://www.php.net/hash">hash</a>, <a class="reference external" href="http://www.php.net/tokenizer">tokenizer</a>, <a class="reference external" href="http://www.php.net/hash">hash</a> and <a class="reference external" href="http://www.php.net/sqlite3">sqlite3</a> extensions. They all are part of the core.</p>
<p>Extra PHP-CLI versions allow more linting of the code. They only need to have the <a class="reference external" href="http://www.php.net/tokenizer">tokenizer</a> extension available.</p>
<p>Exakat recommends PHP 7.4.4 (or newer version) to run Exakat. We also recommend the installation of PHP versions 5.6, 7.1, 7.2, 7.3, 7.4 and 8.0 (aka php-src master).</p>
<p>To install easily various versions of PHP, use the ondrej repository. Check <a class="reference external" href="https://launchpad.net/~ondrej/+archive/ubuntu/php">The main PPA for PHP (7.4, 7.3, 7.2, 7.1, 7.0, 5.6)</a>.
You may also check the dotdeb repository, at <a class="reference external" href="https://www.dotdeb.org/instructions/">dotdeb instruction</a> or compile PHP yourself.</p>
</div>
<div class="section" id="installation-guide-with-docker">
<h2>3.10. Installation guide with Docker<a class="headerlink" href="#installation-guide-with-docker" title="Permalink to this headline">¶</a></h2>
<p>There are multiple ways to use exakat with docker. There is an image with a full exakat installation, which run with a traditional installation, or inside the audited code. Or, You may use Docker with a standard installation, to run useful part, such as a specific PHP version or the central database.</p>
<p>image:: images/exakat-and-docker.png</p>
<div class="section" id="docker-image-for-exakat-with-projects-folder">
<h3>3.10.1. Docker image for Exakat with projects folder<a class="headerlink" href="#docker-image-for-exakat-with-projects-folder" title="Permalink to this headline">¶</a></h3>
<p>Installation with Docker is easy, and convenient. It hides the dependency of the graph database, and keeps all files in the ‘projects’ folder, created in the working directory.</p>
<p>Currently, Docker installation only ships with one PHP version (7.3), and with support for bazaar, composer, git, mercurial, svn, and zip.</p>
<ul class="simple">
<li>Install <a class="reference external" href="http://www.docker.com/">Docker</a></li>
<li>Start Docker</li>
<li>Pull exakat. The official docker page is <a class="reference external" href="https://hub.docker.com/r/exakat/exakat/">exakat/exakat</a>.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">pull</span> <span class="n">exakat</span><span class="o">/</span><span class="n">exakat</span>
</pre></div>
</div>
<ul class="simple">
<li>Check-run exakat :</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -it -v $(pwd)/projects:/usr/src/exakat/projects --rm --name my-exakat exakat/exakat exakat version
docker run -it -v $(pwd)/projects:/usr/src/exakat/projects --rm --name my-exakat exakat/exakat exakat doctor
</pre></div>
</div>
<ul class="simple">
<li>Init a project :</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -it -v $(pwd)/projects:/usr/src/exakat/projects --rm --name my-exakat exakat/exakat exakat init -p &lt;project name&gt; -R &lt;vcs_url&gt;
</pre></div>
</div>
<ul class="simple">
<li>Run exakat :</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -it -v $(pwd)/projects:/usr/src/exakat/projects --rm --name my-exakat exakat/exakat exakat project -p &lt;project name&gt;
</pre></div>
</div>
<ul class="simple">
<li>Run exakat directly in the code base. For that, the code needs to have the .exakat.yml or .exakat.ini file available at the root. Then, you may call exakat with the ‘project’ command, without other options.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -it -v $(pwd)/projects:/usr/src/exakat/projects --rm --name my-exakat exakat/exakat exakat project
</pre></div>
</div>
<p>For large code bases, it may be necessary to increase the allocated memory for the graph database. Do this by using the JAVA_OPTIONS environment variable when you start the docker command : this example gives 2Gb of RAM to the graphdb. That should cover medium size applications.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -it -e JAVA_OPTIONS=&quot;-Xms32m -Xmx2g&quot; -v $(pwd)/projects:/usr/src/exakat/projects --rm --name my-exakat exakat/exakat exakat
</pre></div>
</div>
<p>You may run any exakat command by prefixing it with the following command :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -it -v $(pwd)/projects:/usr/src/exakat/projects --rm --name my-exakat exakat/exakat exakat
</pre></div>
</div>
<p>You may also create a handy shortcut, by creating an exakat.sh script and put it in your PATH :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="s1">&#39;docker run -it -v $(pwd)/projects:/usr/src/exakat/projects --rm --name my-exakat exakat/exakat exakat $1&#39;</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">exakat</span><span class="o">.</span><span class="n">sh</span>
<span class="n">chmod</span> <span class="n">u</span><span class="o">+</span><span class="n">x</span>  <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">exakat</span><span class="o">.</span><span class="n">sh</span>
<span class="o">./</span><span class="n">exakat</span><span class="o">.</span><span class="n">sh</span> <span class="n">version</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>3.10.2. Docker image for Exakat with projects folder<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>To run exakat inside the audited code, you must configure the <cite>.exakat.ini</cite> or <cite>.exakat.yaml</cite> file. See <a class="reference external" href="https://www.exakat.io/add-exakat-to-your-ci-pipeline/">Add Exakat To Your CI Pipeline</a>.</p>
<p>Then, you can run the following command, with docker :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -it --rm -v `$pwd`:/src exakat/exakat:latest exakat project -v
</pre></div>
</div>
</div>
<div class="section" id="docker-php-image-with-exakat">
<h3>3.10.3. Docker PHP image with Exakat<a class="headerlink" href="#docker-php-image-with-exakat" title="Permalink to this headline">¶</a></h3>
<p>Exakat recognizes docker images configured as PHP binaries. Instead of configuring exakat with local binaries, such as <cite>/usr/bin/php</cite>, you may configure a specific PHP version with a docker image.</p>
<p>Open the <cite>config/exakat.ini</cite> file, at the root of the exakat installation, and use the following value :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">configuration</span> <span class="k">with</span> <span class="n">the</span> <span class="s1">&#39;tetraweb/php:5.5&#39;</span> <span class="n">image</span><span class="o">.</span>
<span class="p">;</span><span class="n">php55</span> <span class="o">=</span> <span class="n">tetraweb</span><span class="o">/</span><span class="n">php</span><span class="p">:</span><span class="mf">5.5</span>
<span class="n">php56</span> <span class="o">=</span> <span class="n">tetraweb</span><span class="o">/</span><span class="n">php</span><span class="p">:</span><span class="mf">5.6</span>
<span class="c1"># classic configuration with local binary</span>
<span class="n">php73</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">php</span>
</pre></div>
</div>
<p>The image may be any docker image that provides a PHP binary. We suggest using <a class="reference external" href="https://hub.docker.com/r/tetraweb/php/">tetraweb/php</a>, which supports PHP 5.5 to 7.1. There are other images available, and you may also roll out your own.</p>
</div>
<div class="section" id="docker-gremlin-image-with-exakat">
<h3>3.10.4. Docker Gremlin image with Exakat<a class="headerlink" href="#docker-gremlin-image-with-exakat" title="Permalink to this headline">¶</a></h3>
<p>Exakat is able to use only the central database, Gremlin, as a docker image. This is convenient, as the database is only a temporary database, and those data are not necessary for producing the final reports.</p>
<p>This image is under construction, and will be soon available.</p>
</div>
</div>
<div class="section" id="installation-guide-as-github-action">
<h2>3.11. Installation guide as Github Action<a class="headerlink" href="#installation-guide-as-github-action" title="Permalink to this headline">¶</a></h2>
<div class="section" id="github-action">
<h3>3.11.1. Github Action<a class="headerlink" href="#github-action" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://docs.github.com/en/actions">Github Action</a> is a way to “Automate, customize, and execute your software development workflows right in your repository”. Exakat may be run on Github platform.</p>
</div>
<div class="section" id="github-action-for-exakat">
<h3>3.11.2. Github Action for Exakat<a class="headerlink" href="#github-action-for-exakat" title="Permalink to this headline">¶</a></h3>
<p>To add Exakat to your repository on Github, create a file <cite>.github/workflows/test.yml</cite>, at the root of your repository (<cite>.github/workflows</cite> might already exists).</p>
<p>In the file, use the following YAML code. It will create an automatic action, on push and pull_request actions, that runs Exakat and display the issues found in the workflow panel. It is also possible to run manually this action.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">on</span><span class="p">:</span> <span class="p">[</span><span class="n">push</span><span class="p">,</span> <span class="n">pull_request</span><span class="p">]</span>
<span class="n">name</span><span class="p">:</span> <span class="n">Test</span>
<span class="n">jobs</span><span class="p">:</span>
  <span class="n">exakat</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Exakat</span>
    <span class="n">runs</span><span class="o">-</span><span class="n">on</span><span class="p">:</span> <span class="n">ubuntu</span><span class="o">-</span><span class="n">latest</span>
    <span class="n">steps</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">uses</span><span class="p">:</span> <span class="n">actions</span><span class="o">/</span><span class="n">checkout</span><span class="nd">@v2</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Exakat</span>
      <span class="n">uses</span><span class="p">:</span> <span class="n">docker</span><span class="p">:</span><span class="o">//</span><span class="n">exakat</span><span class="o">/</span><span class="n">exakat</span><span class="o">-</span><span class="n">ga</span>
</pre></div>
</div>
<p>Note : it is recommended to edit this file directly on github.com, as it cannot be pushed from a remote repository.</p>
<p>Then, you can use the <cite>Action</cite> button, next to ‘Pull requests’.</p>
</div>
<div class="section" id="exakat-docker-image-for-github-action">
<h3>3.11.3. Exakat Docker image for Github Action<a class="headerlink" href="#exakat-docker-image-for-github-action" title="Permalink to this headline">¶</a></h3>
<p>A Docker image is released with Exakat’s version automatically, to be used with Github Action. It is available at <a class="reference external" href="https://hub.docker.com/r/exakat/exakat-ga">https://hub.docker.com/r/exakat/exakat-ga</a>.</p>
<p>You can run it in any given directory like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /path/to/code
docker pull exakat/exakat-ga
docker run --rm -it -v ${PWD}:/app exakat/exakat-ga:latest
</pre></div>
</div>
</div>
<div class="section" id="installation-guide-for-optional-tools">
<h3>3.11.4. Installation guide for optional tools<a class="headerlink" href="#installation-guide-for-optional-tools" title="Permalink to this headline">¶</a></h3>
<p>Exakat is able to use a variety of tools to access PHP code to audit. Some external tools are necessary. You can check which tools are recognized locally with the <cite>exakat doctor -v</cite> command.</p>
<ul class="simple">
<li><a class="reference external" href="https://bazaar.canonical.com/en/">Bazaar</a> : the <cite>bzr</cite> command must be available.</li>
<li><a class="reference external" href="https://getcomposer.org/">composer</a> : the <cite>composer</cite> command must be available.</li>
<li><a class="reference external" href="https://www.nongnu.org/cvs/">CVS</a> : the <cite>cvs</cite> command must be available</li>
<li><a class="reference external" href="https://git-scm.com/">Git</a> : the <cite>git</cite> command must be available.</li>
<li><a class="reference external" href="https://www.mercurial-scm.org/">mercurial</a> : the <cite>hg</cite> must be available</li>
<li><a class="reference external" href="https://subversion.apache.org/">Svn</a> : the <cite>svn</cite> command must be available.</li>
<li>tgz : the <cite>tar</cite> and <cite>gunzip</cite> commands must be available</li>
<li>tbz : the <cite>tar</cite> and <cite>bunzip2</cite> commands must be available.</li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/RAR_(file_format)">rar</a> : the <cite>rar</cite> commands must be available.</li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Zip_(file_format)">zip</a> : the <cite>unzip</cite> command must be available.</li>
<li><a class="reference external" href="https://www.7-zip.org/7z.html">7z</a> : the <cite>7z</cite> command must be available</li>
</ul>
<p>The binaries above are used with the <cite>init</cite> and <cite>update</cite> commands, to get the source code. They are optional.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Upgrading.html" class="btn btn-neutral float-right" title="4. Upgrading" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Features.html" class="btn btn-neutral float-left" title="2. Exakat features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2015-2020, Damien Seguy

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>